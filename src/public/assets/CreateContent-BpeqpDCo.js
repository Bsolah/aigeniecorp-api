import{o as $,r as a,u as D,j as e,ab as P,ac as z}from"./index-CJPFVNcn.js";import{I as m}from"./iconify-DQsmSZas.js";import{C as x}from"./Card-DxGgCpey.js";import{s as E}from"./commonFunctions-hd7OIixn.js";import{y as M}from"./dialog-7vQ3hIrB.js";import{c as o}from"./createLucideIcon-BpOLNCH7.js";import"./keyboard-47bePG9x.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],q=o("ChevronDown",R);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],A=o("ChevronRight",X);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],K=o("Plus",B);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],T=o("X",L),W=()=>{const h=$();let[w,i]=a.useState(!0);const[b,c]=a.useState(!1),{folder:l}=D(s=>s.folders);let f=E(l[0]);const[v,y]=a.useState({}),[d,C]=a.useState(l==null?void 0:l.name),[p,u]=a.useState(""),k=s=>{y(n=>({...n,[s]:!n[s]}))},F=s=>{const n=s.match(/[^/]+$/);h(z({parent:n})),c(!1)},I=s=>{h(P({name:p,parent:s})),u("")},_=()=>{c(!0),i(!1)},S=()=>{i(!1)};if(w)return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg w-96",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Choose an option:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(x,{onClick:_,className:"cursor-pointer p-3 flex flex-col items-center text-center border rounded-xl shadow-sm",children:[e.jsx(m,{icon:"ri:file-fill",className:"w-10 h-10 self-center"}),e.jsx("p",{className:"text-xs font-light mt-2",children:"New Page"})]}),e.jsxs(x,{onClick:()=>i(!1),className:"cursor-pointer p-3 flex flex-col items-center text-center border rounded-xl shadow-sm",children:[e.jsx(m,{icon:"ri:file-list-3-line",className:"w-10 h-10 self-center"}),e.jsx("p",{className:"text-xs font-light mt-2",children:"Template"})]}),e.jsxs(x,{onClick:S,className:"cursor-pointer p-3 flex flex-col items-center text-center border rounded-xl shadow-sm",children:[e.jsx(m,{icon:"ri:import-fill",className:"w-10 h-10 self-center"}),e.jsx("p",{className:"text-xs font-light mt-2",children:"Import"})]})]})]})});const N=(s,n="")=>s==null?void 0:s.map(t=>{var j;console.log("folder id ",t);const r=n?`${n}/${t.id}`:t.id,g=v[r];return e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:`cursor-pointer p-2 flex items-center ${r===d?"bg-blue-200":"hover:bg-gray-200"} rounded `,onDoubleClick:()=>k(r),onClick:()=>C(r),children:[e.jsxs("span",{className:"ml-2 text-xs ",children:["📁 ",t==null?void 0:t.name]}),((j=t==null?void 0:t.children)==null?void 0:j.length)>0&&(g?e.jsx(q,{size:16}):e.jsx(A,{size:16}))]}),g&&e.jsx("div",{className:"ml-4",children:N(t==null?void 0:t.children,r)})]},r)});return e.jsx(M,{open:b,onClose:()=>c(!1),className:"fixed inset-0 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-md shadow-xl w-[50vw]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Create New Page"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(T,{size:20})})]}),e.jsxs("div",{className:"mt-4 border p-4 rounded-md bg-gray-100",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Knowledge Base Explorer"}),e.jsx("div",{className:"mt-2",children:N([f])})]}),e.jsxs("div",{className:"mt-4 flex text-xs gap-2",children:[e.jsx("input",{type:"text",placeholder:"New Folder Name",className:"w-1/4 p-2 border text-xs rounded-sm",value:p,onChange:s=>u(s.target.value)}),e.jsx("button",{className:"p-2 bg-secondary text-white  rounded-md hover:bg-primary",onClick:()=>I(d),children:e.jsx(K,{size:20})}),e.jsx("button",{className:"w-full bg-primary text-white py-2  text-xs rounded-md hover:bg-green-700",onClick:()=>F(d),children:"Create"})]})]})})};export{W as default};
